<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">




  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.png?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="RHANQTL" type="application/atom+xml">






<meta name="description" content="设计原则0    导言软件的可维护性与复用性  面向对象软件设计复用的目标在于实现支持可维护性的复用，而这要以面向对象软件设计原则为基础，这些设计原则首先都是复用的原则，遵循这些设计原则可以有效地提高系统的复用性，同时提高系统的可维护性 面向对象设计原则也是对系统进行合理重构的指南针  面向对象软件设计方法中，一共有 7 条重要的指导原则，分别是：  单一职责原则 (Single Responsi">
<meta property="og:type" content="article">
<meta property="og:title" content="面向对象软件设计：设计原则">
<meta property="og:url" content="http://yoursite.com/2019/09/25/oo-design-principles/index.html">
<meta property="og:site_name" content="RHANQTL">
<meta property="og:description" content="设计原则0    导言软件的可维护性与复用性  面向对象软件设计复用的目标在于实现支持可维护性的复用，而这要以面向对象软件设计原则为基础，这些设计原则首先都是复用的原则，遵循这些设计原则可以有效地提高系统的复用性，同时提高系统的可维护性 面向对象设计原则也是对系统进行合理重构的指南针  面向对象软件设计方法中，一共有 7 条重要的指导原则，分别是：  单一职责原则 (Single Responsi">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/09/25/oo-design-principles/stack-extends-vector.png">
<meta property="og:image" content="http://yoursite.com/2019/09/25/oo-design-principles/stack-aggregates-vector.png">
<meta property="og:image" content="http://yoursite.com/2019/09/25/oo-design-principles/stack-aggregates-list.png">
<meta property="og:updated_time" content="2019-09-30T03:00:18.935Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="面向对象软件设计：设计原则">
<meta name="twitter:description" content="设计原则0    导言软件的可维护性与复用性  面向对象软件设计复用的目标在于实现支持可维护性的复用，而这要以面向对象软件设计原则为基础，这些设计原则首先都是复用的原则，遵循这些设计原则可以有效地提高系统的复用性，同时提高系统的可维护性 面向对象设计原则也是对系统进行合理重构的指南针  面向对象软件设计方法中，一共有 7 条重要的指导原则，分别是：  单一职责原则 (Single Responsi">
<meta name="twitter:image" content="http://yoursite.com/2019/09/25/oo-design-principles/stack-extends-vector.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/09/25/oo-design-principles/">





  <title>面向对象软件设计：设计原则 | RHANQTL</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RHANQTL</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">上下求索</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/25/oo-design-principles/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Qi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RHANQTL">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">面向对象软件设计：设计原则</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-25T11:26:04+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/软件设计-Software-Design/" itemprop="url" rel="index">
                    <span itemprop="name">软件设计 (Software Design)</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h1 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h1><h1 id="0-导言"><a href="#0-导言" class="headerlink" title="0    导言"></a>0    导言</h1><p>软件的可维护性与复用性</p>
<ul>
<li>面向对象软件设计复用的目标在于实现支持可维护性的复用，而这要以面向对象软件设计原则为基础，这些设计原则首先都是复用的原则，遵循这些设计原则可以有效地提高系统的复用性，同时提高系统的可维护性</li>
<li>面向对象设计原则也是对系统进行合理重构的指南针</li>
</ul>
<p>面向对象软件设计方法中，一共有 7 条重要的指导原则，分别是：</p>
<ul>
<li>单一职责原则 (Single Responsibility Principle，SRP)</li>
<li>开闭原则 (Open/Close Principle，OCP)</li>
<li>里氏替换原则 (Liskov Substitution Principle，LSP)</li>
<li>接口隔离原则 (Interface Segregation Principle，ISP)</li>
<li>依赖倒置原则 (Dependency Inversion Principle，DIP)</li>
<li>合成复用原则 (Composite Reuse Principle，CRP)</li>
<li>迪米特法则 (Law of Demeter，LoD)</li>
</ul>
<p>（前五条原则可以简记为 SOLID，由 Robert C. Martin 提出）</p>
<p>下面逐一介绍。</p>
<a id="more"></a>
<h1 id="1-单一职责原则"><a href="#1-单一职责原则" class="headerlink" title="1    单一职责原则"></a>1    单一职责原则</h1><h2 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1    定义"></a>1.1    定义</h2><blockquote>
<p>A class should have one, and only one, reason to change.</p>
</blockquote>
<p><strong>第一种表述</strong>    一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中</p>
<p><strong>第二种表述</strong>    就一个类而言，应该有且仅有一个引起它变化的原因</p>
<h2 id="1-2-分析"><a href="#1-2-分析" class="headerlink" title="1.2    分析"></a>1.2    分析</h2><p>每个类应该仅有单一的目的。</p>
<p>If you change anything in that class, it will effect only one particular behavior of the software. That makes the code more robust because there will be less side effects. If a class had two responsibilities and you changed anything, the risk would be high that you also break the logic for the second behavior.</p>
<ul>
<li>一个软件实体（类、模块、方法）承担的职责越多，它被复用的可能性越小，而且耦合度也会过高；</li>
<li>类的职责主要表现在两个方面：数据职责和行为职责，数据职责通过属性来体现，行为职责通过方法来体现；</li>
<li>单一职责原则是实现高内聚、低耦合的指导方针。</li>
</ul>
<h2 id="1-3-示例"><a href="#1-3-示例" class="headerlink" title="1.3    示例"></a>1.3    示例</h2><h3 id="1-3-1-银行账户"><a href="#1-3-1-银行账户" class="headerlink" title="1.3.1    银行账户"></a>1.3.1    银行账户</h3><p>An Account class is responsible for managing Current and Saving Account but a CurrentAccount and a SavingAccount classes would be responsible for managing current and saving accounts respectively. Hence both are responsible for single purpose only. Hence we are moving towards specialization.</p>
<h3 id="1-3-2-电子邮件系统"><a href="#1-3-2-电子邮件系统" class="headerlink" title="1.3.2    电子邮件系统"></a>1.3.2    电子邮件系统</h3><h1 id="2-开闭原则"><a href="#2-开闭原则" class="headerlink" title="2    开闭原则"></a>2    开闭原则</h1><h2 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1    定义"></a>2.1    定义</h2><blockquote>
<p>Software entities like classes, modules, functions should be <strong>open for extension</strong> but <strong>closed for modification</strong>.</p>
</blockquote>
<p>一个软件实体（模块、类、方法等）应该对扩展 (Extension) 开放，对修改 (Modification) 关闭。也就是说，应该能够在不改变模块内部代码/设计的情况下改变其的行为，即扩展。</p>
<h2 id="2-2-分析"><a href="#2-2-分析" class="headerlink" title="2.2    分析"></a>2.2    分析</h2><ul>
<li>关键是 “抽象化”</li>
<li>更具体的原则：对可变性封装原则 (Encapsulation )，即找到系统中的可变因素，并将其封装</li>
</ul>
<h2 id="2-3-示例"><a href="#2-3-示例" class="headerlink" title="2.3    示例"></a>2.3    示例</h2><h3 id="2-3-1-示例-1"><a href="#2-3-1-示例-1" class="headerlink" title="2.3.1    示例 1"></a>2.3.1    示例 1</h3><p>Imagine you use an external library which contains a class <code>Car</code>. The <code>Car</code> has a method <code>brake</code>. In its base implementation, this method only slows down the car but you also want to turn on the brake lights. You would create a subclass of <code>Car</code> and override the method <code>brake</code>. After calling the original method of the super class, you can call your own <code>turnOnBrakeLights</code> method. This way you have extended the <code>Car</code>‘s behavior without touching the original class from the library.</p>
<h3 id="2-3-1-示例-2"><a href="#2-3-1-示例-2" class="headerlink" title="2.3.1    示例 2"></a>2.3.1    示例 2</h3><p>如果让你设计 Amazon 的支付接口，如何设计才能支持多种支付方式并且能容易地增加支付方式呢？想要支持多种支付方式 —— 支付宝、微信、PayPal 甚至比特币等等，那么该如何设计这个模块呢？</p>
<p>一种很差劲的方法就是把所有的功能都写在一起，代码就会像下面这样一坨：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaymentGateway</span> </span>&#123;</span><br><span class="line">    <span class="function">ResuleMessage <span class="title">pay</span><span class="params">(<span class="keyword">double</span> amount, Vendor vendor)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> UnsupportedVendorException </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (vendor) &#123;</span><br><span class="line">            <span class="keyword">case</span> Vendor.Alipay:</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Vendor.WeChat:</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Vendor.Paypal:</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">// 其他支付方式 ...</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedVendorException(vendor.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果想要增加新的支付方式，就要来修改这一坨代码，但是会有很多问题：</p>
<ul>
<li>需要重新进行单元测试；</li>
<li>如果是多人维护，每次增加支付方式，都必须重新理解代码，这会随着规模增大；</li>
<li>可能会影响现有的代码。</li>
</ul>
<p>如何设计才比较好呢？</p>
<p>首先，我们有一个基类 <code>PaymentGateway</code>，其中包含所有与支付相关的基本属性和方法 —— 订单号、支付金额等等。然后，对其进行扩展，<code>AlipayPaymentGateway</code> 支持支付宝相关的需求、<code>WeChatPaymentGateway</code> 支持微信支付、<code>PayPalPaymentGateway</code> 支持 PayPal 支付。</p>
<h2 id="2-4-结论"><a href="#2-4-结论" class="headerlink" title="2.4    结论"></a>2.4    结论</h2><p>Like every principle OCP is <strong>only</strong> a principle. Making a flexible design involves additional time and effort spent for it and it introduce new level of abstraction increasing the complexity of the code. So this principle should be applied in those area which are most likely to be changed.</p>
<p>There are many design patterns that help us to extend code without changing it. For instance the Decorator pattern help us to follow Open Close principle. Also the Factory Method or the Observer pattern might be used to design an application easy to change with minimum changes in the existing code.</p>
<h1 id="3-里氏替换原则"><a href="#3-里氏替换原则" class="headerlink" title="3    里氏替换原则"></a>3    里氏替换原则</h1><p>But following the rules of that principle alone is not enough to ensure that you can change one part of your system without breaking other parts. Your classes and interfaces also need to follow the Liskov Substitution Principle to avoid any side-effects.</p>
<p>It extends the Open/Closed Principle by focusing on the behavior of a superclass and its subtypes. As I will show you in this article, this is at least as important but harder to validate that the structural requirements of the Open/Closed Principle.</p>
<p>The principle defines that objects of a superclass shall be replaceable with objects of its subclasses without breaking the application. That requires the objects of your subclasses to behave in the same way as the objects of your superclass. </p>
<h2 id="3-1-定义"><a href="#3-1-定义" class="headerlink" title="3.1    定义"></a>3.1    定义</h2><p>使用基类的地方应该都能够使用相应的子类代替，而无需了解子类的细节（透明），<strong>反之不成立</strong>。</p>
<h2 id="3-2-解释-amp-分析"><a href="#3-2-解释-amp-分析" class="headerlink" title="3.2    解释 &amp; 分析"></a>3.2    解释 &amp; 分析</h2><blockquote>
<p><strong>Design by Contract</strong></p>
<p>由 Bertrand Meyer 提出的一种保证/验证软件正确性的方法。</p>
<p>这里只需要了解两个基本的术语：前置条件 (precondition) 和后置条件 (postcondition) [5]</p>
<ul>
<li>前置条件：在函数/方法执行之前必须满足的状态</li>
<li>后置条件：在函数/方法执行之后应该满足的状态</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;sum)</span> </span>&#123;</span><br><span class="line">&gt;     <span class="keyword">return</span> (sum = a + b);</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<ul>
<li>前置条件：<code>a</code> 和 <code>b</code> 必须是合法整数，其值应该在整数的最大值和最小值之间；</li>
<li>后置条件<ul>
<li>函数的返回值等于 <code>a</code> 和 <code>b</code> 的和</li>
<li>变量 <code>sum</code> 对应的存储单元更新为 <code>a</code> 和 <code>b</code> 的和</li>
</ul>
</li>
</ul>
</blockquote>
<p>An overridden method of a subclass needs to accept the same input parameter values as the method of the superclass. That means you can implement less restrictive validation rules, but you are not allowed to enforce stricter ones in your subclass. </p>
<p>Similar rules apply to the return value of the method. The return value of a method of the subclass needs to comply with the same rules as the return value of the method of the superclass. You can only decide to apply even stricter rules by returning a specific subclass of the defined return value, or by returning a subset of the valid return values of the superclass.</p>
<p>If you decide to apply this principle to your code, the behavior of your classes becomes more important than its structure.</p>
<p>Java 中，不允许子类单独定义异常，也不允许降低访问权限。</p>
<h2 id="3-3-示例"><a href="#3-3-示例" class="headerlink" title="3.3    示例"></a>3.3    示例</h2><p>参见 [4]</p>
<h1 id="4-接口隔离原则"><a href="#4-接口隔离原则" class="headerlink" title="4    接口隔离原则"></a>4    接口隔离原则</h1><h2 id="4-1-定义"><a href="#4-1-定义" class="headerlink" title="4.1    定义"></a>4.1    定义</h2><blockquote>
<p>Clients should not be forced to depend upon interfaces that they do not use.</p>
</blockquote>
<p>使用窄 (fine grained) 接口。</p>
<p>Sounds obvious, doesn’t it? Well, as I will show you in this article, it’s pretty easy to violate this interface, especially if your software evolves and you have to add more and more features. But more about that later.</p>
<p>Similar to the <a href="https://stackify.com/solid-design-principles/" target="_blank" rel="noopener">Single Responsibility Principle</a>, the goal of the Interface Segregation Principle is to reduce the side effects and frequency of required changes by splitting the software into multiple, independent parts.</p>
<p>—</p>
<p>Classes should be as specialized as possible. You do not want any god classes that contain the whole application logic. The source code should be modular and every class should contain only the minimum necessary logic to achieve the desired behavior. The same goes for interfaces. Make small and specific interfaces so the client who implements them does not depend on methods it does not need. Instead of one class that can handle three special cases it is better to have three classes, one for each special case.</p>
<p>—</p>
<p>When we design an application we should take care how we are going to make abstract a module which contains several submodules. Considering the module implemented by a class, we can have an abstraction of the system done in an interface. But if we want to extend our application adding another module that contains <strong>only some of the submodules of the original system</strong>, we are forced to implement the full interface and to write some dummy methods. Such an interface is named fat interface or polluted interface. Having an interface pollution is not a good solution and might induce inappropriate behavior in the system.</p>
<p>The <strong>Interface Segregation Principle</strong> states that clients should not be forced to implement interfaces they don’t use. Instead of one fat interface many small interfaces are preferred based on groups of methods, each one serving one submodule.</p>
<h2 id="4-3-示例"><a href="#4-3-示例" class="headerlink" title="4.3    示例"></a>4.3    示例</h2><p>我们有这样一个需求：经理 (Manager) 管理工人 (Worker)，工人一共有两种：普通工人和超级工人。超级工人工作效率更高。所有的工人每天中午都要吃饭 (eat)。现在工厂新引入了机器人 (Robot)，机器人不需要吃饭，但是需要充电 (charge)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口隔离原则 - 不好的示例</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IWorker</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">implements</span> <span class="title">IWorker</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... working</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... eating in launch break</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// dummy method</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperWorker</span> <span class="keyword">implements</span> <span class="title">IWorker</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... working much more</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... eating in launch break</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// dummy method</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Robot</span> <span class="keyword">implements</span> <span class="title">IWorker</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... working</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// dummy method</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ... charging</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">	IWorker worker;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWorker</span><span class="params">(IWorker w)</span> </span>&#123;</span><br><span class="line">		worker = w;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">manage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		worker.work();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样的问题在于：</p>
<ul>
<li>要实现一些用不到的接口；</li>
<li>可能会出现不符合需求的情况 —— 比如，<code>Robot</code> 的 <code>eat</code> 方法就是消耗 1 秒钟的时间，这样经理看到的报告中，午餐时间就会比实际人数多。</li>
</ul>
<p>下面是遵守接口隔离原则的示例。原来的 <code>IWorker</code> 被拆分成了 3 个接口：<code>IWorkable</code>、<code>IFeedable</code> 和 <code>IChargable</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口隔离原则 - 好的示例</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IWorkable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IFeedable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IChargable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">implements</span> <span class="title">IWorkable</span>, <span class="title">IFeedable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... working</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... eating in launch break</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperWorker</span> <span class="keyword">implements</span> <span class="title">IWorkable</span>, <span class="title">IFeedable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... working much more</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// ... eating in launch break</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Robot</span> <span class="keyword">implements</span> <span class="title">IWorkable</span>, <span class="title">IChargable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//  ...working</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ... charging</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">	Workable worker;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWorker</span><span class="params">(Workable w)</span> </span>&#123;</span><br><span class="line">		worker = w;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">manage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		worker.work();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-4-结论"><a href="#4-4-结论" class="headerlink" title="4.4    结论"></a>4.4    结论</h2><p>如果接口已经被设计成是宽接口，那么可以使用适配器模式来实现接口隔离。</p>
<p>Like every principle Interface Segregation Principle is one principle which require additional time and effort spent to apply it during the design time and increase the complexity of code. But it produce a flexible design. If we are going to apply it more than is necessary it will result a code containing a lot of interfaces with single methods, so applying should be done based on experience and common sense in identifying the areas where extension of code are more likely to happens in the future.</p>
<h1 id="5-依赖倒置原则"><a href="#5-依赖倒置原则" class="headerlink" title="5    依赖倒置原则"></a>5    依赖倒置原则</h1><h2 id="5-1-定义"><a href="#5-1-定义" class="headerlink" title="5.1    定义"></a>5.1    定义</h2><blockquote>
<ol>
<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>
<li>Abstractions should not depend on details. Details should depend on abstractions.</li>
</ol>
</blockquote>
<ol>
<li>高层模块不应该依赖低层模块，它们都应该依赖抽象；</li>
<li>抽象不应该依赖具体实现，具体实现应该依赖抽象。</li>
</ol>
<p>It is based on the <a href="https://stackify.com/solid-design-open-closed-principle/" target="_blank" rel="noopener">Open/Closed Principle</a> and the <a href="https://stackify.com/solid-design-liskov-substitution-principle/" target="_blank" rel="noopener">Liskov Substitution Principle</a>.</p>
<p>It helps us to develop loosely couple code by ensuring that high-level modules depend on abstractions rather than concrete implementations of lower-level modules. </p>
<h2 id="5-3-示例"><a href="#5-3-示例" class="headerlink" title="5.3    示例"></a>5.3    示例</h2><h3 id="5-3-1-博客发布"><a href="#5-3-1-博客发布" class="headerlink" title="5.3.1    博客发布"></a>5.3.1    博客发布</h3><p>Imagine we have a class <code>Distributer</code> which is able to share a blog post on different platforms. According to the <em>Interface Segregation Principle</em> the distributer uses a composition of several instances, like a <code>TwitterShareAction</code> and a <code>FacebookShareAction</code>. Now the goal of the <em>Dependency Inversion Principle</em> is to not depend on concrete methods of the share action classes, like <code>sharePostOnTwitter</code> and <code>sharePostOnFacebook</code>. Instead the <code>Distributer</code> class would define an interface called <code>Sharing</code> which is implemented by <code>TwitterShareAction</code> and <code>FacebookShareAction</code>. It declares the abstract method <code>sharePost</code>. The <code>Distributer</code> class doesn’t have to know the details of the concrete share actions. It just calls the <code>sharePost</code> method.</p>
<h3 id="5-3-2-依赖注入-Dependency-Injection"><a href="#5-3-2-依赖注入-Dependency-Injection" class="headerlink" title="5.3.2    依赖注入 (Dependency Injection)"></a>5.3.2    依赖注入 (Dependency Injection)</h3><p>如果一个类 A 的功能实现需要借助于类 B，那么就称类 B 是类 A 的<strong>依赖</strong>，如果在类 A 的内部去实例化类 B，那么两者之间会出现较高的<strong>耦合</strong>，一旦类 B 出现了问题，类 A 也需要进行改造，如果这样的情况较多，每个类之间都有很多依赖，那么就会出现牵一发而动全身的情况，<strong>程序会极难维护</strong>，并且很容易出现问题。要解决这个问题，就要把 A 类对 B 类的控制权抽离出来，交给一个第三方去做，把控制权反转给第三方，就称作<strong>控制反转 (IoC Inversion of Control)</strong>。<strong>控制反转是一种思想</strong>，是能够解决问题的一种可能的结果，而<strong>依赖注入 (Dependency Injection)</strong> 就是其最典型的实现方法。由第三方（我们称作 <strong>IoC 容器</strong>）来控制依赖，把他通过 <strong>XML 配置文件、构造函数、属性或者工厂模式</strong>等方法，注入到类 A 内，这样就极大程度地对类 A 和类 B 进行了<strong>解耦</strong>。[6]</p>
<blockquote>
<p>Wikipedia 对硬编码 (hard coding) 的定义：Hard coding (also hard-coding or hardcoding) is the software development practice of embedding data directly into the source code of a program or other executable object, as opposed to obtaining the data from external sources or generating it <u>at run-time</u>. [7]</p>
<p>从这个定义来看，个人认为这种在类内实例化一个具体的类的行为也属于硬编码。</p>
</blockquote>
<p>留待日后再看：<a href="https://www.theserverside.com/news/1321158/A-beginners-guide-to-Dependency-Injection" target="_blank" rel="noopener">A beginners guide to Dependency Injection</a></p>
<h1 id="6-合成复用原则"><a href="#6-合成复用原则" class="headerlink" title="6    合成复用原则"></a>6    合成复用原则</h1><h2 id="6-1-定义"><a href="#6-1-定义" class="headerlink" title="6.1    定义"></a>6.1    定义</h2><p>Favor polymorphic composition of objects over inheritance.</p>
<p>The Composite Reuse Principle (CRP) prevents us from making one of the most catastrophic mistakes that contribute to the demise of an object-oriented system: using inheritance as the primary reuse mechanism.</p>
<p>Inheritance can be thought of as a generalization over a specialization relationship. That is, a class higher in the inheritance hierarchy is a more general version of those inherited from it. In other words, any ancestor class is a partial descriptor that should define some default characteristics that are applicable to any class inherited from it.</p>
<p>Any time we have to override default behavior defined in an ancestor class, we are saying that the ancestor class is not a more general version of all of its descendants but actually contains descriptor characteristics that make it too specialized to serve as the ancestor of the class in question. Therefore, if we choose to define default behavior on an ancestor, it should be general enough to <u>apply to all of its descendants</u>.</p>
<p>In practice, it’s not uncommon to define a default behavior in an ancestor class. However, we should still accommodate CRP in our relationships. [8]</p>
<p>也叫 “组合/聚合复用原则”</p>
<p>多用组合，少用继承。</p>
<h2 id="6-2-与依赖倒置原则的关系"><a href="#6-2-与依赖倒置原则的关系" class="headerlink" title="6.2    与依赖倒置原则的关系"></a>6.2    与依赖倒置原则的关系</h2><p>一个经典的例子：Java 中的 <code>Stack</code> 类继承自 <code>Vector</code></p>
<img src="/2019/09/25/oo-design-principles/stack-extends-vector.png">
<p>但其实仔细想想，Stack 是一个 (is a) Vector 吗？</p>
<p>并不是，Stack 只是部分地使用了 Vector 的功能，所以更合理的方式应该是 Stack 持有一个 (has a) Vector 的引用，如下：</p>
<img src="/2019/09/25/oo-design-principles/stack-aggregates-vector.png">
<p>再进一步思考，其实 Stack 也并不是非要使用 Vector，它需要的只是一个<u>顺序的容器</u>，能够支持在<u>一端</u>增/删/查即可。所以可以进一步地修改，令 Vector 继承自 List，Stack 持有 List 的引用，这样我们甚至可以在运行时动态地修改 Stack 所依赖的顺序容器，而不会影响 Stack 的正常使用。这样的设计提供了更大的灵活性，同时 Stack 也只提供了必要的接口，否则 Stack 会向外暴露一些顺序容器有而对于栈来说不合理的方法（这里也有接口隔离原则）。</p>
<p>将 Stack 由继承自 Vector 改为持有 Vector 的引用，遵循了合成复用原则；而将 Stack 由持有 Vector（具体类）的引用改为持有 List（抽象接口）的引用，遵循了依赖倒置原则。</p>
<img src="/2019/09/25/oo-design-principles/stack-aggregates-list.png">
<h1 id="7-迪米特法则"><a href="#7-迪米特法则" class="headerlink" title="7    迪米特法则"></a>7    迪米特法则</h1><p>又称“最少知识原则” (Least Knowledge Principle，LKP)</p>
<p>For an operation <code>O</code> on a class <code>C</code>, only operations on the following objects should be called: itself, its parameters, objects it creates, or its contained instance objects.</p>
<p>The Principle of Least Knowledge (PLK) is also known as the Law of Demeter. The basic idea is to avoid calling any methods on an object where the reference to that object is obtained by calling a method on another object. Instead, this principle recommends we call methods on the containing object, not to obtain a reference to some other object, but instead to allow the containing object to <u>forward the request</u> to the object we would have formerly obtained a reference to. The primary benefit is that the calling method doesn’t need to understand the structural makeup of the object it’s invoking methods upon.</p>
<p>The obvious disadvantage associated with PLK is that we must create many methods that only forward method calls to the containing classes internal components. This can contribute to a large and <u>cumbersome</u> public interface. An alternative to PLK, or a variation on its implementation, is to obtain a reference to an object via a method call, with the restriction that any time this is done, the type of the reference obtained is <u>always an interface data type</u>. This is more flexible because we aren’t binding ourselves directly to the concrete implementation of a complex object, but instead are dependent only on the abstractions of which the complex object is composed. This is how many classes in Java typically resolve this situation.</p>
<h1 id="8-结论"><a href="#8-结论" class="headerlink" title="8    结论"></a>8    结论</h1><p>As Uncle Bob says: “They are not laws. They are not perfect truths”. Nevertheless, they have helped me a lot to create clean code, and I think as a developer you should at least know them so you can decide when to apply them and when not.</p>
<h1 id="9-参考文献"><a href="#9-参考文献" class="headerlink" title="9    参考文献"></a>9    参考文献</h1><p>[1] <a href="https://www.dotnettricks.com/learn/designpatterns/different-types-of-software-design-principles" target="_blank" rel="noopener">Different Types of Software Design Principles</a></p>
<p>[2] <a href="https://www.oodesign.com/design-principles.html" target="_blank" rel="noopener">Design Principles</a></p>
<p>[3] <a href="https://team-coder.com/solid-principles/" target="_blank" rel="noopener"></a></p>
<p>[4] <a href="https://stackify.com/solid-design-liskov-substitution-principle/" target="_blank" rel="noopener">SOLID Design Principles Explained: The Liskov Substitution Principle with Code Examples</a></p>
<p>[5] <a href="https://www.programmingincpp.com/precondition-and-postcondition-of-a-function.html" target="_blank" rel="noopener">Precondition and Postcondition</a></p>
<p>[6] <a href="https://zhuanlan.zhihu.com/p/33492169" target="_blank" rel="noopener">知乎 - 浅谈控制反转与依赖注入</a></p>
<p>[7] <a href="https://en.wikipedia.org/wiki/Hard_coding" target="_blank" rel="noopener">Wikipedia - Hard Coding</a></p>
<p>[8] <a href="http://java.boot.by/scea5-guide/ch01.html" target="_blank" rel="noopener">Chapter 1. Application Design Concepts and Principles</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/07/leetcode-969-pancake-sorting/" rel="next" title="leetcode-969-pancake-sorting">
                <i class="fa fa-chevron-left"></i> leetcode-969-pancake-sorting
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/10/01/oo-design-concept-coupling-and-cohesion/" rel="prev" title="面向对象设计基本概念：耦合和内聚">
                面向对象设计基本概念：耦合和内聚 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Han Qi</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">189</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/rhanqtl" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="my@rhanqtl.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#设计原则"><span class="nav-number">1.</span> <span class="nav-text">设计原则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0-导言"><span class="nav-number">2.</span> <span class="nav-text">0    导言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-单一职责原则"><span class="nav-number">3.</span> <span class="nav-text">1    单一职责原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-定义"><span class="nav-number">3.1.</span> <span class="nav-text">1.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-分析"><span class="nav-number">3.2.</span> <span class="nav-text">1.2    分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-示例"><span class="nav-number">3.3.</span> <span class="nav-text">1.3    示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-银行账户"><span class="nav-number">3.3.1.</span> <span class="nav-text">1.3.1    银行账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2-电子邮件系统"><span class="nav-number">3.3.2.</span> <span class="nav-text">1.3.2    电子邮件系统</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-开闭原则"><span class="nav-number">4.</span> <span class="nav-text">2    开闭原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-定义"><span class="nav-number">4.1.</span> <span class="nav-text">2.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-分析"><span class="nav-number">4.2.</span> <span class="nav-text">2.2    分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-示例"><span class="nav-number">4.3.</span> <span class="nav-text">2.3    示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-示例-1"><span class="nav-number">4.3.1.</span> <span class="nav-text">2.3.1    示例 1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-示例-2"><span class="nav-number">4.3.2.</span> <span class="nav-text">2.3.1    示例 2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-结论"><span class="nav-number">4.4.</span> <span class="nav-text">2.4    结论</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-里氏替换原则"><span class="nav-number">5.</span> <span class="nav-text">3    里氏替换原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-定义"><span class="nav-number">5.1.</span> <span class="nav-text">3.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-解释-amp-分析"><span class="nav-number">5.2.</span> <span class="nav-text">3.2    解释 &amp; 分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-示例"><span class="nav-number">5.3.</span> <span class="nav-text">3.3    示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-接口隔离原则"><span class="nav-number">6.</span> <span class="nav-text">4    接口隔离原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-定义"><span class="nav-number">6.1.</span> <span class="nav-text">4.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-示例"><span class="nav-number">6.2.</span> <span class="nav-text">4.3    示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-结论"><span class="nav-number">6.3.</span> <span class="nav-text">4.4    结论</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-依赖倒置原则"><span class="nav-number">7.</span> <span class="nav-text">5    依赖倒置原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-定义"><span class="nav-number">7.1.</span> <span class="nav-text">5.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-示例"><span class="nav-number">7.2.</span> <span class="nav-text">5.3    示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-1-博客发布"><span class="nav-number">7.2.1.</span> <span class="nav-text">5.3.1    博客发布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-2-依赖注入-Dependency-Injection"><span class="nav-number">7.2.2.</span> <span class="nav-text">5.3.2    依赖注入 (Dependency Injection)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-合成复用原则"><span class="nav-number">8.</span> <span class="nav-text">6    合成复用原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-定义"><span class="nav-number">8.1.</span> <span class="nav-text">6.1    定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-与依赖倒置原则的关系"><span class="nav-number">8.2.</span> <span class="nav-text">6.2    与依赖倒置原则的关系</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-迪米特法则"><span class="nav-number">9.</span> <span class="nav-text">7    迪米特法则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-结论"><span class="nav-number">10.</span> <span class="nav-text">8    结论</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-参考文献"><span class="nav-number">11.</span> <span class="nav-text">9    参考文献</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Han Qi</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  

  

  

  
  

  
  


  

  

</body>
</html>
